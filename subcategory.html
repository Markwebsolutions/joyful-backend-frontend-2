<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Subcategory Dashboard</title>
  <link rel="stylesheet" href="global.css" />
  <link rel="stylesheet" href="subcategory.css" />
  <link rel="stylesheet" href="category.css" />
  <!-- Quill CSS -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
  <!-- Quill JS -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
</head>

<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="Dashboard.html" class="logo">AdminPanel</a>
            <ul class="nav-menu">
                <li class="nav-item"><a href="Category.html">Category</a></li>
                <li class="nav-item"><a href="subcategory.html">Sub-Category</a></li>
                <li class="nav-item"><a href="product.html">Products</a></li>

                <li class="nav-item">
                    <a href="csvupload.html">Upload CSV</a>
                </li>
                <li class="nav-item">
                    <a href="productenquiry.html">Product Enquiry</a>
                </li>
                <li class="nav-item">
                    <a href="GeneralEnquiry.html">General Enquiry</a>
                </li>
                <li class="nav-item">
                    <a href="subscribe.html">Subscribe</a>
                </li>
                <li class="nav-item">
                    <a href="feedback.html">Reviews</a>
                </li>
                <li class="nav-item">
                    <button class="logout" onclick="logout()">Logout</button>
                </li>
            </ul>
        </div>
    </nav>

  <div class="top-bar container">
    <h1 class="headings">Subcategory Dashboard</h1>

    <div class="top-controls">
      <input type="text" id="searchSubcategoryInput" placeholder="Search Subcategory" onkeyup="searchSubcategory()"
        class="search-input" />

      <button class="add-btn" onclick="openAddModal()">
        + Add Subcategory
      </button>

      <div id="subcategoryCount" class="category-count">
        Total Subcategories: 0
      </div>
    </div>
  </div>


  <div class="table-container">
    <div class="table-wrapper">
      <div class="table-header grid-table">
        <div>Name</div>
        <div>Image</div>
        <div>Category</div>
        <div>Status</div>
        <div>Actions</div>
      </div>
      <div id="subcategoryTableBody"></div>
    </div>
  </div>

  <!-- Add/Edit Modal -->
  <div id="addModal" class="modal" style="display: none">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="headings" id="formTitle">Add Subcategory</h2>
        <span class="close-btn" onclick="closeAddModal()">&times;</span>
      </div>
      <form id="addForm" class="modal-form">
        <input type="hidden" id="subcategoryId" />

        <div class="form-group">
          <label><span class="required">*</span> Subcategory Name:</label>
          <input type="text" id="name" required />
        </div>
        <div class="form-group">
          <label><span class="required">*</span> Select Categories:</label>
          <div class="custom-multi-select" onclick="toggleDropdown()" style="position: relative">
            <div id="selectedCategories" class="selected-tags" style="
                  display: flex;
                  flex-wrap: wrap;
                  gap: 5px;
                  min-height: 38px;
                  border: 1px solid #ccc;
                  padding: 5px;
                  cursor: text;
                  width: 100%;
                  cursor: pointer;
                "></div>
            <div id="dropdownList" class="dropdown-list" style="
                  display: none;
                  position: absolute;
                  top: 100%;
                  left: 0;
                  width: 100%;
                  background: white;
                  border: 1px solid #ccc;
                  z-index: 10;
                  width: 100%;
                "></div>
          </div>
        </div>
        <div class="form-group">
          <label><span class="required">*</span> Description:</label>

          <div id="descriptionEditor" style="height: 150px"></div>
        </div>

        <div class="form-group">
          <label><span class="required">*</span> Image Path (URL):</label>
          <input type="text" id="imagepath" placeholder="Paste image URL" oninput="previewSubcategoryImage()"
            required />
          <img id="subImagePreview" src="" alt="Preview" class="image-preview" style="
                width: 50%;
                max-height: 200px;
                margin: 10px 0;
                display: none;
                text-align: center;
                border: 1px solid lightblue;
              " />
        </div>
        <div style="margin-bottom: 10px">
          <h3 style="
                border-bottom: 1px solid rgb(58, 141, 248);
                width: 45px;
                color: rgb(58, 141, 248);
              ">
            SEO:
          </h3>
        </div>
        <div class="form-group">
          <label><span class="required">*</span> Meta Title:</label>
          <input type="text" id="metatitle" required />
        </div>

        <div class="form-group">
          <label><span class="required">*</span> Meta Description:</label>
          <textarea id="metadescription" required></textarea>
        </div>

        <div class="form-group">
          <label><span class="required">*</span> SEO Keywords:</label>
          <input type="text" id="seokeywords" required />
        </div>
        <div class="form-group">
          <label>Status:</label>
          <div class="radio-group">
            Publish:
            <label>
              <input type="radio" name="ispublished" value="true" checked required />
            </label>
            <label>
              Draft:
              <input type="radio" name="ispublished" value="false" required />
            </label>
          </div>
        </div>

        <div class="form-buttons">
          <button type="submit" class="btn-primary">Save</button>
          <button type="button" class="btn-secondary" onclick="closeAddModal()">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
  <div id="customAlert" class="custom-alert">
    <div class="custom-alert-box">
      <p id="customAlertMessage">Alert message</p>
      <button onclick="closeCustomAlert()" id="violate-fk">OK</button>
    </div>
  </div>

  <script src="./Logout.js"></script>
  <script src="./subcategory.js"></script>
</body>
</html>